import{Q as j,r as m,j as e,O as p,P as h,f as C,S as f,T as F,z as v,C as g,u as b,b as S,U as D,N}from"./index-1d193954.js";import{a as E,S as U,b as A}from"./Admin-f64758ba.js";import{F as x}from"./FirstInput-a12c229a.js";import{C as w}from"./CloseButton-2cb4cbfb.js";const y=()=>{const[s]=j(),[r,t]=m.useState({name:"",description:""}),a=d=>{t({...r,[d.target.name]:d.target.value})},o=d=>{d.preventDefault();try{const{name:i,description:l}=r;s({name:i,description:l}).unwrap(),t({name:"",description:""})}catch(i){console.log(i)}};return e.jsxs("form",{onSubmit:o,children:[e.jsxs("label",{htmlFor:"",children:["Category name",e.jsx(x,{id:name,type:"text",name:"name",value:r.name,onChange:a})]}),e.jsx("label",{htmlFor:"description",children:e.jsx(p,{id:"description",name:"description",value:r.description,onChange:a,placeholder:"category description"})}),e.jsx(h,{children:"Add Category"})]})},B=({category:s,setId:r})=>{const t=C(),[a,o]=m.useState({name:s==null?void 0:s.name,description:s==null?void 0:s.description}),[d]=f();m.useEffect(()=>{o({name:s.name,description:s.description})},[s]);const i=n=>{o({...a,[n.target.name]:n.target.value})},l=n=>{n.preventDefault();const c={...s,name:a.name,description:a.description};try{if(c.name===s.name){t(F("Please update category name"));return}d(c).unwrap(),o({}),t(v(`Updated category ${s.name} successfully`))}catch(u){t(g(u.message)),console.log(u)}};return e.jsxs("div",{children:[e.jsx("div",{className:"close-cat",children:e.jsx(w,{closeFn:()=>r(null),children:e.jsx("p",{children:"close"})})}),e.jsxs("h2",{children:["Update category ",e.jsx("span",{children:s.name})]}),e.jsxs("form",{onSubmit:l,children:[e.jsx("label",{htmlFor:"name",children:e.jsx(x,{type:"text",name:"name",value:a.name,onChange:i})}),e.jsx("label",{htmlFor:"description",children:e.jsx(p,{id:"description",name:"description",value:a.description,onChange:i,placeholder:"category description"})}),e.jsx(h,{children:"Update"})]})]})},L=()=>{var i,l;const s=(l=(i=b(S))==null?void 0:i.data)==null?void 0:l.categories,[r]=D(),[t,a]=m.useState(null),o=s==null?void 0:s.find(n=>n.id===t),d=n=>{try{r(n).unwrap()}catch(c){console.log(c)}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"cat-body",children:[e.jsx("div",{className:"dash-head",children:e.jsx("h2",{children:"Categories List"})}),e.jsx("ul",{className:"admin-categories",children:s.map(n=>e.jsxs("li",{children:[e.jsx(N,{to:`/categories/${n.id}`,children:e.jsx("h3",{children:n.name})}),e.jsxs("div",{className:"buttons",children:[e.jsx(h,{buttonFn:()=>a(n==null?void 0:n.id),children:e.jsx(E,{})}),e.jsx(U,{buttonFn:()=>d(n==null?void 0:n.id),children:e.jsx(A,{})})]})]},n.id))}),e.jsx("div",{className:"add-category",children:e.jsx(y,{})})]}),e.jsx("div",{className:t?"update-category":"",children:t&&e.jsx(B,{category:o,setId:a})})]})};export{L as default};
