import{j as s,P as h,r,N as m,x as p,e as N,u as d,s as g,E as v,F as f,G as b,f as S,h as _}from"./index-4eddcbba.js";import{e as E,M as y,U as L,S as $,f as P}from"./Modal-55d8fc81.js";import"./CloseButton-9cc44bcb.js";const w=({tab:a,setTab:e,handleLogout:t})=>{const i=["main","orders"];return s.jsxs("div",{className:"user-nav",children:[s.jsx("h2",{children:"Profile"}),s.jsx("ul",{children:i.map(n=>s.jsx("li",{children:s.jsx("button",{onClick:()=>e(n),className:`nav-btn ${a===n?"active":""}`,children:n})},n))}),s.jsx("div",{className:"logout-btn",children:s.jsx(h,{type:"button",buttonFn:t,children:"Logout"})})]})},C="/assets/watch_3-1325ce31.webp",R=({user:a})=>{const[e,t]=r.useState(null);return s.jsxs("div",{className:"user-details",children:[s.jsx("img",{src:C,alt:`${a.first_name}'s profile`}),s.jsxs("h2",{children:[a.first_name," ",a.last_name]}),s.jsx("p",{children:a.email}),s.jsxs(h,{buttonFn:()=>t(!0),children:[s.jsx(E,{}),"Edit"]}),s.jsx(y,{isOpen:e,onClose:()=>t(null),children:s.jsx(L,{user:a})})]})},T=({userOrders:a})=>s.jsxs("div",{className:"user-orders",children:[s.jsx("h2",{children:"My orders"}),s.jsx("ul",{children:a!=null&&a.length?a==null?void 0:a.map(e=>s.jsxs("li",{className:"order-list",children:[s.jsxs("div",{className:"order-id ",children:[s.jsx("h4",{children:"id"}),s.jsx(m,{to:`/orders/${e.id}`,children:e.id})]}),s.jsxs("div",{className:"order-address ",children:[s.jsx("h4",{children:"Address"}),s.jsx("p",{children:e.Shipping[0].address})]}),s.jsxs("div",{className:"order-track ",children:[s.jsx("h4",{children:"Tracking_number"}),s.jsx("p",{children:e.Shipping[0].tracking_number})]}),s.jsxs("div",{className:`order-status ${e.order_status.toLowerCase()}`,children:[s.jsx("h4",{children:"Status"}),s.jsx("p",{children:e.Shipping[0].status==="INPROGRESS"?"IN-PROGRESS":e.Shipping[0].status})]}),s.jsxs("div",{className:`order-status ${e.order_status.toLowerCase()}`,children:[s.jsx("h4",{children:"Payment"}),s.jsx("p",{children:e.order_status})]}),s.jsxs("div",{className:"order-total ",children:[s.jsx("h4",{children:"Total"}),s.jsxs("p",{children:["$",e.total_amount]})]}),s.jsx("div",{className:"buttons",children:s.jsx($,{children:s.jsx(P,{})})})]},e==null?void 0:e.id)):s.jsx("h4",{className:"empty",children:"No available orders"})})]}),U=()=>{var o;const[a,e]=r.useState("main"),t=p(),i=N(),n=(o=d(g).data)==null?void 0:o.orders,c=d(v),x=n.filter(l=>l.user_id===c.id),[j]=f();r.useEffect(()=>{document.title=`${c.first_name} ${c.last_name}`});const u=async()=>{try{await j().unwrap(),i(b()),t("/login"),i(S("Logged out"))}catch(l){i(_(l.message)),console.log(l)}};return s.jsx("div",{className:"profile",children:s.jsxs("div",{className:"profile-container",children:[s.jsx(w,{tab:a,setTab:e,handleLogout:u}),a==="main"&&s.jsx(R,{user:c}),a==="orders"&&s.jsx(T,{userOrders:x})]})})};export{U as default};
