import{j as s,P as h,r,N as m,x as p,e as g,u as d,s as N,E as v,F as f,G as b,f as S,h as _}from"./index-1bee27aa.js";import{e as E,M as y,U as L,S as $,f as P}from"./Modal-4573d5d5.js";import"./CloseButton-4832f0e7.js";const w=({tab:t,setTab:a,handleLogout:e})=>{const i=["main","orders"];return s.jsxs("div",{className:"user-nav",children:[s.jsx("h2",{children:"Profile"}),s.jsx("ul",{children:i.map(n=>s.jsx("li",{children:s.jsx("button",{onClick:()=>a(n),className:`nav-btn ${t===n?"active":""}`,children:n})},n))}),s.jsx("div",{className:"logout-btn",children:s.jsx(h,{type:"button",buttonFn:e,children:"Logout"})})]})},C="/assets/watch_3-1325ce31.webp",R=({user:t})=>{const[a,e]=r.useState(null);return s.jsxs("div",{className:"user-details",children:[s.jsx("img",{src:C,alt:`${t.first_name}'s profile`}),s.jsxs("h2",{children:[t.first_name," ",t.last_name]}),s.jsx("p",{children:t.email}),s.jsxs(h,{buttonFn:()=>e(!0),children:[s.jsx(E,{}),"Edit"]}),s.jsx(y,{isOpen:a,onClose:()=>e(null),children:s.jsx(L,{user:t})})]})},T=({userOrders:t})=>s.jsxs("div",{className:"user-orders",children:[s.jsx("h2",{children:"My orders"}),s.jsx("ul",{children:t!=null&&t.length?t==null?void 0:t.map(a=>s.jsxs("li",{className:"order-list",children:[s.jsxs("div",{className:"order-id ",children:[s.jsx("h4",{children:"id"}),s.jsx(m,{to:`/orders/${a.id}`,children:a.id})]}),s.jsxs("div",{className:"order-address ",children:[s.jsx("h4",{children:"Address"}),s.jsx("p",{children:a.Shipping[0].address})]}),s.jsxs("div",{className:"order-track ",children:[s.jsx("h4",{children:"Tracking_number"}),s.jsx("p",{children:a.Shipping[0].tracking_number})]}),s.jsxs("div",{className:`order-status ${a.order_status.toLowerCase()}`,children:[s.jsx("h4",{children:"Status"}),s.jsx("p",{children:a.Shipping[0].status==="INPROGRESS"?"IN-PROGRESS":a.Shipping[0].status})]}),s.jsxs("div",{className:`order-status ${a.order_status.toLowerCase()}`,children:[s.jsx("h4",{children:"Payment"}),s.jsx("p",{children:a.order_status})]}),s.jsxs("div",{className:"order-total ",children:[s.jsx("h4",{children:"Total"}),s.jsxs("p",{children:["$",a.total_amount]})]}),s.jsx("div",{className:"buttons",children:s.jsx($,{children:s.jsx(P,{})})})]},a==null?void 0:a.id)):s.jsx("h4",{className:"empty",children:"No available orders"})})]}),U=()=>{var o;const[t,a]=r.useState("main"),e=p(),i=g(),n=(o=d(N).data)==null?void 0:o.orders,c=d(v),x=n.filter(l=>l.user_id===c.id),[j]=f();r.useEffect(()=>{document.title=`${c.first_name} ${c.last_name}`});const u=async()=>{try{(await j().unwrap()).message&&(i(b()),e("/login"),i(S("Logged out")))}catch(l){i(_(l.message)),console.log(l)}};return s.jsx("div",{className:"profile",children:s.jsxs("div",{className:"profile-container",children:[s.jsx(w,{tab:t,setTab:a,handleLogout:u}),t==="main"&&s.jsx(R,{user:c}),t==="orders"&&s.jsx(T,{userOrders:x})]})})};export{U as default};
