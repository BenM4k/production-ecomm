import{S as j,r as c,j as e,Q as p,P as h,f as C,T as f,U as F,C as v,D as g,u as b,b as S,V as D,N}from"./index-1bd465e3.js";import{d as E,S as U,e as A}from"./SecondaryButton-d9d51557.js";import{F as x}from"./FirstInput-3d23c3a5.js";import{C as w}from"./CloseButton-fdeb85c9.js";const y=()=>{const[s]=j(),[r,a]=c.useState({name:"",description:""}),n=d=>{a({...r,[d.target.name]:d.target.value})},o=d=>{d.preventDefault();try{const{name:i,description:l}=r;s({name:i,description:l}).unwrap(),a({name:"",description:""})}catch(i){console.log(i)}};return e.jsxs("form",{onSubmit:o,children:[e.jsxs("label",{htmlFor:"",children:["Category name",e.jsx(x,{id:name,type:"text",name:"name",value:r.name,onChange:n})]}),e.jsx("label",{htmlFor:"description",children:e.jsx(p,{id:"description",name:"description",value:r.description,onChange:n,placeholder:"category description"})}),e.jsx(h,{children:"Add Category"})]})},B=({category:s,setId:r})=>{const a=C(),[n,o]=c.useState({name:s==null?void 0:s.name,description:s==null?void 0:s.description}),[d]=f();c.useEffect(()=>{o({name:s.name,description:s.description})},[s]);const i=t=>{o({...n,[t.target.name]:t.target.value})},l=t=>{t.preventDefault();const m={...s,name:n.name,description:n.description};try{if(m.name===s.name){a(F("Please update category name"));return}d(m).unwrap(),o({}),a(v(`Updated category ${s.name} successfully`))}catch(u){a(g(u.message)),console.log(u)}};return e.jsxs("div",{children:[e.jsx("div",{className:"close-cat",children:e.jsx(w,{closeFn:()=>r(null),children:e.jsx("p",{children:"close"})})}),e.jsxs("h2",{children:["Update category ",e.jsx("span",{children:s.name})]}),e.jsxs("form",{onSubmit:l,children:[e.jsx("label",{htmlFor:"name",children:e.jsx(x,{type:"text",name:"name",value:n.name,onChange:i})}),e.jsx("label",{htmlFor:"description",children:e.jsx(p,{id:"description",name:"description",value:n.description,onChange:i,placeholder:"category description"})}),e.jsx(h,{children:"Update"})]})]})},T=()=>{var i,l;const s=(l=(i=b(S))==null?void 0:i.data)==null?void 0:l.categories,[r]=D(),[a,n]=c.useState(null),o=s==null?void 0:s.find(t=>t.id===a),d=t=>{try{r(t).unwrap()}catch(m){console.log(m)}};return c.useEffect(()=>{document.title="Categories List"}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"cat-body",children:[e.jsx("div",{className:"dash-head",children:e.jsx("h2",{children:"Categories List"})}),e.jsx("ul",{className:"admin-categories",children:s.map(t=>e.jsxs("li",{children:[e.jsx(N,{to:`/categories/${t.id}`,children:e.jsx("h3",{children:t.name})}),e.jsxs("div",{className:"buttons",children:[e.jsx(h,{buttonFn:()=>n(t==null?void 0:t.id),children:e.jsx(E,{})}),e.jsx(U,{buttonFn:()=>d(t==null?void 0:t.id),children:e.jsx(A,{})})]})]},t.id))}),e.jsx("div",{className:"add-category",children:e.jsx(y,{})})]}),e.jsx("div",{className:a?"update-category":"",children:a&&e.jsx(B,{category:o,setId:n})})]})};export{T as default};
