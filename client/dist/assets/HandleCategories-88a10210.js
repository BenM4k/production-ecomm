import{X as j,r as c,j as e,W as p,P as h,e as C,Y as f,Z as g,g as F,h as v,u as N,b,$ as D,N as S}from"./index-1bee27aa.js";import{g as x,e as E,S as A,f as M,M as U}from"./Modal-4573d5d5.js";import"./CloseButton-4832f0e7.js";const w=()=>{const[s]=j(),[r,t]=c.useState({name:"",description:""}),n=l=>{t({...r,[l.target.name]:l.target.value})},d=l=>{l.preventDefault();try{const{name:i,description:o}=r;s({name:i,description:o}).unwrap(),t({name:"",description:""})}catch(i){console.log(i)}};return e.jsxs("form",{onSubmit:d,children:[e.jsxs("label",{htmlFor:"",children:["Category name",e.jsx(x,{id:name,type:"text",name:"name",value:r.name,onChange:n})]}),e.jsx("label",{htmlFor:"description",children:e.jsx(p,{id:"description",name:"description",value:r.description,onChange:n,placeholder:"category description"})}),e.jsx(h,{children:"Add Category"})]})},y=({category:s,setId:r})=>{const t=C(),[n,d]=c.useState({name:s==null?void 0:s.name,description:s==null?void 0:s.description}),[l]=f();c.useEffect(()=>{d({name:s.name,description:s.description})},[s]);const i=a=>{d({...n,[a.target.name]:a.target.value})},o=a=>{a.preventDefault();const m={...s,name:n.name,description:n.description};try{if(m.name===s.name){t(g("Please update category name"));return}l(m).unwrap(),d({}),r(null),t(F(`Updated category ${s.name} successfully`))}catch(u){t(v(u.message)),console.log(u)}};return e.jsxs("div",{className:"update-category",children:[e.jsxs("h2",{children:["Update category ",e.jsx("span",{children:s.name})]}),e.jsxs("form",{onSubmit:o,children:[e.jsxs("label",{htmlFor:"name",children:["Name",e.jsx(x,{type:"text",name:"name",value:n.name,onChange:i})]}),e.jsxs("label",{htmlFor:"description",children:["Description",e.jsx(p,{id:"description",name:"description",value:n.description,onChange:i,placeholder:"category description"})]}),e.jsx(h,{children:"Update"})]})]})},$=()=>{var i,o;const s=(o=(i=N(b))==null?void 0:i.data)==null?void 0:o.categories,[r]=D(),[t,n]=c.useState(null),d=s==null?void 0:s.find(a=>a.id===t),l=a=>{try{r(a).unwrap()}catch(m){console.log(m)}};return c.useEffect(()=>{document.title="Categories List"}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"cat-body",children:[e.jsx("div",{className:"dash-head",children:e.jsx("h2",{children:"Categories List"})}),e.jsxs("ul",{className:"admin-categories-title",children:[e.jsx("li",{className:"cat-name",children:"Name"}),e.jsx("li",{className:"cat-desc",children:"Description"}),e.jsx("li",{className:"cat-actions",children:"Actions"})]}),e.jsx("ul",{className:"admin-categories-body",children:s.map(a=>e.jsxs("li",{children:[e.jsx(S,{to:`/categories/${a.id}`,children:e.jsx("h4",{children:a.name})}),e.jsx("p",{children:a.description}),e.jsxs("div",{className:"buttons",children:[e.jsx(h,{buttonFn:()=>n(a==null?void 0:a.id),children:e.jsx(E,{})}),e.jsx(A,{buttonFn:()=>l(a==null?void 0:a.id),children:e.jsx(M,{})})]})]},a.id))})]}),e.jsx("div",{className:"add-category",children:e.jsx(w,{})}),t&&e.jsx(U,{isOpen:d,onClose:()=>n(null),children:e.jsx(y,{category:d,setId:n})})]})};export{$ as default};
